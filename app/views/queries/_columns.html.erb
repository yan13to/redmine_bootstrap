<% tag_id = tag_name.gsub(/[\[\]]+/, '_').sub(/_+$/, '') %>
<% available_tag_id = "available_#{tag_id}" %>
<% selected_tag_id = "selected_#{tag_id}" %>

<table>
  <tr>
    <td>
      <%= label_tag available_tag_id, l(:description_available_columns) %>
      <%= select_tag 'available_columns',
              options_for_select(query_available_inline_columns_options(query)),
              id: available_tag_id,
              class: 'form-select',
              multiple: true,
              size: 10,
              ondblclick: "moveOptions(this.form.#{available_tag_id}, this.form.#{selected_tag_id});" %>
    </td>
    <td>
      <input type="button" value="&#8594;" class="btn btn-outline-secondary btn-sm" onclick="moveOptions(this.form.<%= available_tag_id %>, this.form.<%= selected_tag_id %>);" />
      <input type="button" value="&#8592;" class="btn btn-outline-secondary btn-sm" onclick="moveOptions(this.form.<%= selected_tag_id %>, this.form.<%= available_tag_id %>);" />
    </td>
    <td>
      <%= label_tag selected_tag_id, l(:description_selected_columns) %>
      <%= select_tag tag_name,
              options_for_select(query_selected_inline_columns_options(query)),
              id: selected_tag_id,
              class: 'form-select',
              multiple: true,
              size: 10,
              ondblclick: "moveOptions(this.form.#{selected_tag_id}, this.form.#{available_tag_id});" %>
    </td>
    <td>
      <input type="button" value="&#8648;" class="btn btn-outline-secondary btn-sm" onclick="moveOptionTop(this.form.<%= selected_tag_id %>);" />
      <input type="button" value="&#8593;" class="btn btn-outline-secondary btn-sm" onclick="moveOptionUp(this.form.<%= selected_tag_id %>);" />
      <input type="button" value="&#8595;" class="btn btn-outline-secondary btn-sm" onclick="moveOptionDown(this.form.<%= selected_tag_id %>);" />
      <input type="button" value="&#8650;" class="btn btn-outline-secondary btn-sm" onclick="moveOptionBottom(this.form.<%= selected_tag_id %>);" />
    </td>
  </tr>
</table>